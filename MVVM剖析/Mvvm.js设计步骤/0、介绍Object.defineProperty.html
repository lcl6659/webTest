<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Object.defineProperty()</title>
		<style>
			body{
				line-height: 35px;
				font-size: 20px;
				box-sizing: border-box;
				padding: 20px 120px;
			}
			p{
				padding: 15px 30px;
				background-color: #F6F6F6;
				border-radius: 10px;
			}
			pre{
				background-color: #F6F6F6;
				border-radius: 10px;
			}
		</style>
	</head>
	<body>
		MVVM实现数据双向绑定：数据劫持+发布订阅模式<br/>
		其中数据劫持便是使用Object.defineProperty()实现的<br /><br />
		
		<p>
			Object.defineProperty(obj, prop, descriptor)<br /><br />
			obj：必需。目标对象 <br />
			prop：必需。需定义或修改的属性的名字<br />
			descriptor：必需。属性描述符，目标属性所拥有的特性<br />
		</p>
		
		<p>
			descriptor可选键值:<br /><br />
			
			configurable：当且仅当该属性的 configurable 为 true 时，该属性描述符才能够被改变，同时该属性也能从对应的对象上被删除。默认为 false。<br />
			enumerable：当且仅当该属性的enumerable为true时，该属性才能够出现在对象的枚举属性中。默认为 false。<br />
			value：该属性对应的值。可以是任何有效的 JavaScript 值（数值，对象，函数等）。默认为 undefined。<br />
			writable：当且仅当该属性的writable为true时，value才能被赋值运算符改变。默认为 false。<br />
			get：一个给属性提供 getter 的方法，如果没有 getter 则为 undefined。该方法返回值被用作属性值。默认为 undefined。<br />
			set：一个给属性提供 setter 的方法，如果没有 setter 则为 undefined。该方法将接受唯一参数，并将该参数的新值分配给该属性。默认为 undefined。<br /><br />
			
			注意：value、writable与get、set不能同时设置
			
		</p>
		
		<pre>
<code>
	var obj = {
	    test:"hello"
	}
	//对象已有的属性添加特性描述
	Object.defineProperty(obj,"test",{
	    configurable:true | false,
	    enumerable:true | false,
	    value:任意类型的值,
	    writable:true | false,
	});
	//对象新添加的属性的特性描述
	Object.defineProperty(obj,"newKey",{
	    configurable:true | false,
	    enumerable:true | false,
	    value:任意类型的值,
	    writable:true | false,
	});
</code>
		</pre>
		
		
	</body>
	<script type="text/javascript">
		let user = {};
		let name = "韩学键";
		Object.defineProperty(user,'name',{
			configurable:true,
			enumerable:true,
			/*writable:false,
			value:'周玉玉',*/
			get(){
				console.log("get():")
				return name
			},
			set(newVal){
				console.log("set():")
				name = newVal;
			}
		})
		
		console.log(user.name);
		user.name = "虚拟世界";
		console.log(user.name);
		
	</script>
</html>
